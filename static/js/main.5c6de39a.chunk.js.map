{"version":3,"sources":["utils/fetchClient.ts","types/TodoStatus.ts","api/users.ts","components/Auth/AuthForm.tsx","components/Auth/AuthContext.tsx","components/Todo/Todo.tsx","types/ErrorMessages.ts","components/TodoList/TodoList.tsx","components/Error/Error.tsx","api/todos.ts","components/Header/Header.tsx","components/Footer/Footer.tsx","App.tsx","index.tsx"],"names":["BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","ok","Error","json","TodoStatus","client","getUserByEmail","email","a","users","createUser","name","AuthForm","onLogin","useState","setEmail","setName","needToRegister","setNeedToRegister","loading","setLoading","errorMessage","setErrorMessage","saveUser","user","localStorage","setItem","useEffect","userData","getItem","parse","error","loadUser","handleSubmit","event","preventDefault","onSubmit","className","htmlFor","classNames","type","id","placeholder","disabled","value","required","onChange","e","target","minLength","AuthContext","React","createContext","AuthProvider","children","setUser","Provider","ErrorMessages","TodoItem","memo","todo","onDelete","isAdding","clearCompleted","changeTodo","processedTodo","editTitle","setEditTitle","newTitle","setNewTitle","completed","title","applyNewTitle","data-cy","checked","onBlur","onKeyUp","key","onDoubleClick","onClick","includes","TodoList","todos","filterStatus","changeStatus","visibleTodos","useMemo","Active","filter","Completed","map","onClose","timerId","clearTimeout","hidden","todoId","Header","todosLength","setTitle","onToggle","completedTodos","newTodoField","useRef","current","focus","aria-label","cn","active","ref","Footer","onStatusChange","status","activeTodos","onClear","href","selected","All","App","useContext","setTodos","setIsAdding","tempTodo","setTempTodo","setFilterStatus","setClearCompleted","setProcessedTodo","length","userId","catch","TodosWereNotLoaded","handleDeleteTodo","todosId","listOfTodos","TodoIsNotDeleted","finally","handleChangeTodo","caption","changeCompletedStatus","TodoIsNotUpdates","trim","addTodo","newTodo","prevTodos","TodoIsNotAdded","TitleIsEmpty","toggleStatus","forEach","Root","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.5c6de39a.chunk.js","sourcesContent":["const BASE_URL = 'https://mate.academy/students-api';\n\n// a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // we wait for testing purpose to see loaders\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","// eslint-disable-next-line no-shadow\nexport enum TodoStatus {\n  All = 'All',\n  Active = 'Active',\n  Completed = 'Completed',\n}\n","import { User } from '../types/User';\nimport { client } from '../utils/fetchClient';\n\nexport const getUserByEmail = async (email: string) => {\n  const users = await client.get<User[]>(`/users?email=${email}`);\n\n  return users[0] || null;\n};\n\ntype UserData = Pick<User, 'name' | 'email'>;\n\nexport const createUser = async ({ email, name }: UserData) => {\n  return client.post<User>('/users', { email, name });\n};\n","import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { createUser, getUserByEmail } from '../../api/users';\nimport { User } from '../../types/User';\n\nexport type Props = {\n  onLogin: (user: User) => void,\n};\n\nexport const AuthForm: React.FC<Props> = ({ onLogin }) => {\n  const [email, setEmail] = useState('');\n  const [name, setName] = useState('');\n  const [needToRegister, setNeedToRegister] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const saveUser = (user: User) => {\n    localStorage.setItem('user', JSON.stringify(user));\n    onLogin(user);\n  };\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user');\n\n    if (!userData) {\n      return;\n    }\n\n    try {\n      const user = JSON.parse(userData) as User;\n\n      onLogin(user);\n    } catch (error) {\n      // Need to login\n    }\n  }, []);\n\n  const loadUser = async () => {\n    const user = await getUserByEmail(email);\n\n    if (user) {\n      saveUser(user);\n    } else {\n      setNeedToRegister(true);\n    }\n  };\n\n  const registerUser = () => {\n    return createUser({ name, email })\n      .then(saveUser);\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    setErrorMessage('');\n    setLoading(true);\n\n    try {\n      if (needToRegister) {\n        await registerUser();\n      } else {\n        await loadUser();\n      }\n    } catch (error) {\n      setErrorMessage('Something went wrtong');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"box mt-5\">\n      <h1 className=\"title is-3\">\n        {needToRegister ? 'You need to register' : 'Log in to open todos'}\n      </h1>\n\n      <div className=\"field\">\n        <label\n          className=\"label\"\n          htmlFor=\"user-email\"\n        >\n          Email\n          <div\n            className={classNames('control has-icons-left', {\n              'is-loading': loading,\n            })}\n          >\n            <input\n              type=\"email\"\n              name=\"user-email\"\n              id=\"user-email\"\n              className={classNames('input', {\n                'is-danger': !needToRegister && errorMessage,\n              })}\n              placeholder=\"Enter your email\"\n              disabled={loading || needToRegister}\n              value={email}\n              required\n              onChange={e => setEmail(e.target.value)}\n            />\n\n            <span className=\"icon is-small is-left\">\n              <i className=\"fas fa-envelope\" />\n            </span>\n          </div>\n        </label>\n        {!needToRegister && errorMessage && (\n          <p className=\"help is-danger\">{errorMessage}</p>\n        )}\n      </div>\n\n      {needToRegister && (\n        <div className=\"field\">\n          <label className=\"label\" htmlFor=\"user-name\">\n            Your Name\n            <div\n              className={classNames('control has-icons-left', {\n                'is-loading': loading,\n              })}\n            >\n              <input\n                type=\"text\"\n                id=\"user-name\"\n                className={classNames('input', {\n                  'is-danger': needToRegister && errorMessage,\n                })}\n                placeholder=\"Enter your name\"\n                required\n                minLength={4}\n                disabled={loading}\n                value={name}\n                onChange={e => setName(e.target.value)}\n              />\n\n              <span className=\"icon is-small is-left\">\n                <i className=\"fas fa-user\" />\n              </span>\n            </div>\n          </label>\n\n          {needToRegister && errorMessage && (\n            <p className=\"help is-danger\">{errorMessage}</p>\n          )}\n        </div>\n      )}\n\n      <div className=\"field\">\n        <button\n          type=\"submit\"\n          className={classNames('button is-primary', {\n            'is-loading': loading,\n          })}\n        >\n          {needToRegister ? 'Register' : 'Login'}\n        </button>\n      </div>\n    </form>\n  );\n};\n","import React, { useState } from 'react';\nimport { User } from '../../types/User';\nimport { AuthForm } from './AuthForm';\n\nexport const AuthContext = React.createContext<User | null>(null);\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nexport const AuthProvider: React.FC<Props> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n\n  if (!user) {\n    return <AuthForm onLogin={setUser} />;\n  }\n\n  return (\n    <AuthContext.Provider value={user}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { Todo } from '../../types/Todo';\n\ntype Props = {\n  todo: Todo;\n  onDelete: (id: number) => Promise<void>;\n  isAdding?: boolean;\n  clearCompleted: boolean;\n  changeTodo: (\n    id: number,\n    title: string,\n    changeCompletedStatus?: boolean\n  ) => void,\n  processedTodo: number[],\n};\n\nexport const TodoItem: React.FC<Props> = React.memo(({\n  todo,\n  onDelete,\n  isAdding,\n  clearCompleted,\n  changeTodo,\n  processedTodo,\n}) => {\n  const [editTitle, setEditTitle] = useState(false);\n  const [newTitle, setNewTitle] = useState('');\n  const { completed, title, id } = todo;\n  const applyNewTitle = () => {\n    setEditTitle(false);\n\n    if (!newTitle) {\n      onDelete(id);\n\n      return;\n    }\n\n    if (newTitle && newTitle !== title) {\n      changeTodo(id, newTitle, false);\n    }\n  };\n\n  useEffect(() => {\n    if (clearCompleted && completed) {\n      onDelete(id);\n    }\n  }, [clearCompleted, completed]);\n\n  return (\n    <div\n      data-cy=\"Todo\"\n      className={classNames('todo', {\n        completed,\n      })}\n    >\n      <label\n        className=\"todo__status-label\"\n        htmlFor=\"todo_status\"\n      >\n        <input\n          data-cy=\"TodoStatus\"\n          type=\"checkbox\"\n          className=\"todo__status\"\n          checked={completed}\n          id=\"todo_status\"\n          onChange={() => changeTodo(id, title)}\n        />\n      </label>\n\n      {(editTitle)\n        ? (\n          <form\n            onSubmit={applyNewTitle}\n          >\n            <input\n              data-cy=\"TodoTitle\"\n              className=\"todo__title-field\"\n              type=\"text\"\n              value={newTitle}\n              onChange={(event) => setNewTitle(event.target.value)}\n              onBlur={applyNewTitle}\n              onKeyUp={(event) => {\n                if (event.key === 'Escape') {\n                  setEditTitle(false);\n                }\n              }}\n            />\n          </form>\n        )\n        : (\n          <span\n            data-cy=\"TodoTitle\"\n            className=\"todo__title\"\n            onDoubleClick={() => {\n              setEditTitle(true);\n              setNewTitle(title);\n            }}\n          >\n            {title}\n          </span>\n        )}\n\n      {editTitle || (\n        <button\n          type=\"button\"\n          className=\"todo__remove\"\n          data-cy=\"TodoDeleteButton\"\n          onClick={() => onDelete(id)}\n        >\n          ×\n        </button>\n      )}\n\n      <div\n        data-cy=\"TodoLoader\"\n        className={classNames('modal overlay', {\n          'is-active': processedTodo.includes(id) || isAdding,\n        })}\n      >\n        <div className=\"modal-background has-background-white-ter\" />\n        <div className=\"loader\" />\n      </div>\n    </div>\n  );\n});\n","// eslint-disable-next-line no-shadow\nexport enum ErrorMessages {\n  TodosWereNotLoaded = 'Cannot load todos list',\n  TitleIsEmpty = \"Title can't be empty\",\n  TodoIsNotAdded = 'Unable to add a todo',\n  TodoIsNotDeleted = 'Cannot delete todo',\n  TodoIsNotUpdates = 'Unable to update a todo',\n}\n","import React, { useMemo } from 'react';\nimport { Todo } from '../../types/Todo';\nimport { TodoStatus } from '../../types/TodoStatus';\nimport { TodoItem } from '../Todo';\n\ntype Props = {\n  todos: Todo[];\n  onDelete: (id: number) => Promise<void>;\n  tempTodo?: Todo;\n  isAdding?: boolean;\n  filterStatus: TodoStatus,\n  clearCompleted: boolean,\n  changeTodo: (id: number, title: string) => void,\n  processedTodo: number[],\n};\n\nexport const TodoList: React.FC<Props> = React.memo(({\n  todos,\n  onDelete,\n  filterStatus,\n  clearCompleted,\n  changeTodo: changeStatus,\n  processedTodo,\n}) => {\n  const visibleTodos = useMemo(() => {\n    switch (filterStatus) {\n      case TodoStatus.Active:\n        return todos.filter(todo => !todo.completed);\n      case TodoStatus.Completed:\n        return todos.filter(todo => todo.completed);\n      default:\n        return todos;\n    }\n  }, [filterStatus, todos]);\n\n  return (\n    <section className=\"todoapp__main\" data-cy=\"TodoList\">\n      {visibleTodos.map(todo => (\n        <TodoItem\n          todo={todo}\n          key={todo.id}\n          onDelete={onDelete}\n          clearCompleted={clearCompleted}\n          changeTodo={changeStatus}\n          processedTodo={processedTodo}\n        />\n      ))}\n    </section>\n  );\n});\n","/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { useEffect } from 'react';\n\ntype Props = {\n  errorMessage: string;\n  onClose: (message: string) => void;\n};\n\nexport const Error: React.FC<Props> = ({ errorMessage, onClose }) => {\n  useEffect(() => {\n    const timerId = setTimeout(() => onClose(''), 3000);\n\n    return () => clearTimeout(timerId);\n  }, [errorMessage]);\n\n  return (\n    <div\n      data-cy=\"ErrorNotification\"\n      className=\"notification is-danger is-light has-text-weight-normal\"\n      hidden={errorMessage === ''}\n    >\n      <button\n        data-cy=\"HideErrorButton\"\n        type=\"button\"\n        className=\"delete\"\n        onClick={() => onClose('')}\n      />\n\n      {errorMessage}\n    </div>\n\n  );\n};\n","import { Todo } from '../types/Todo';\nimport { client } from '../utils/fetchClient';\n\nexport const getTodos = (userId: number) => {\n  return client.get<Todo[]>(`/todos?userId=${userId}`);\n};\n\n// Add more methods here\nexport const deleteTodo = (todoId: number) => {\n  return client.delete(`/todos/${todoId}`);\n};\n\nexport const changeTodo = (\n  todoId: number,\n  title?: string,\n  completed?: boolean,\n) => {\n  return client.patch<Todo>(`/todos/${todoId}`, { title, completed });\n};\n\nexport const addTodo = (\n  title: string,\n  userId: number,\n  completed = false,\n) => {\n  return client.post<Todo>('/todos', { title, userId, completed });\n};\n","import cn from 'classnames';\nimport React, { useEffect, useRef } from 'react';\n\ntype Props = {\n  isAdding: boolean;\n  todosLength: number;\n  onSubmit: (event: React.FormEvent<HTMLFormElement>) => void;\n  title: string;\n  setTitle: (newTitle: string) => void;\n  onToggle: () => void;\n  completedTodos: number;\n};\n\nexport const Header: React.FC<Props> = React.memo(({\n  isAdding,\n  todosLength,\n  onSubmit,\n  title,\n  setTitle,\n  onToggle,\n  completedTodos,\n}) => {\n  const newTodoField = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    // focus the element with `ref={newTodoField}`\n    if (newTodoField.current) {\n      newTodoField.current.focus();\n    }\n  }, []);\n\n  return (\n    <header className=\"todoapp__header\">\n      {!!todosLength && (\n        <button\n          data-cy=\"ToggleAllButton\"\n          type=\"button\"\n          aria-label=\"ToggleAllButton\"\n          className={cn('todoapp__toggle-all', {\n            active: todosLength === completedTodos,\n          })}\n          onClick={onToggle}\n        />\n      )}\n\n      <form onSubmit={onSubmit}>\n        <input\n          data-cy=\"NewTodoField\"\n          type=\"text\"\n          ref={newTodoField}\n          value={title}\n          onChange={(event) => setTitle(event.target.value)}\n          className=\"todoapp__new-todo\"\n          placeholder=\"What needs to be done?\"\n          disabled={isAdding}\n        />\n      </form>\n    </header>\n  );\n});\n","import cn from 'classnames';\nimport React, { useEffect } from 'react';\nimport { TodoStatus } from '../../types/TodoStatus';\n\ntype Props = {\n  onStatusChange: (status: TodoStatus) => void;\n  activeTodos: number;\n  status: TodoStatus;\n  completedTodos: number;\n  onClear: (clear: boolean) => void;\n};\n\nexport const Footer: React.FC<Props> = React.memo(({\n  onStatusChange,\n  status,\n  activeTodos,\n  completedTodos,\n  onClear,\n}) => {\n  useEffect(() => {\n    if (!completedTodos) {\n      onClear(false);\n    }\n  }, [completedTodos]);\n\n  return (\n    <footer className=\"todoapp__footer\" data-cy=\"Footer\">\n      <span className=\"todo-count\" data-cy=\"todosCounter\">\n        {`${activeTodos} items left`}\n      </span>\n\n      <nav className=\"filter\" data-cy=\"Filter\">\n        <a\n          data-cy=\"FilterLinkAll\"\n          href=\"#/\"\n          className={cn('filter__link', {\n            selected: status === TodoStatus.All,\n          })}\n          onClick={() => onStatusChange(TodoStatus.All)}\n        >\n          All\n        </a>\n\n        <a\n          data-cy=\"FilterLinkActive\"\n          href=\"#/active\"\n          className={cn('filter__link', {\n            selected: status === TodoStatus.Active,\n          })}\n          onClick={() => onStatusChange(TodoStatus.Active)}\n        >\n          Active\n        </a>\n        <a\n          data-cy=\"FilterLinkCompleted\"\n          href=\"#/completed\"\n          className={cn('filter__link', {\n            selected: status === TodoStatus.Completed,\n          })}\n          onClick={() => onStatusChange(TodoStatus.Completed)}\n        >\n          Completed\n        </a>\n      </nav>\n\n      <button\n        data-cy=\"ClearCompletedButton\"\n        type=\"button\"\n        className=\"todoapp__clear-completed\"\n        disabled={!completedTodos}\n        onClick={() => onClear(true)}\n      >\n        Clear completed\n      </button>\n    </footer>\n  );\n});\n","import React, {\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { AuthContext } from './components/Auth/AuthContext';\nimport { TodoList } from './components/TodoList';\nimport { Error } from './components/Error';\nimport { Todo } from './types/Todo';\nimport {\n  addTodo, changeTodo, deleteTodo, getTodos,\n} from './api/todos';\nimport { Header } from './components/Header';\nimport { TodoStatus } from './types/TodoStatus';\nimport { Footer } from './components/Footer';\nimport { TodoItem } from './components/Todo';\nimport { ErrorMessages } from './types/ErrorMessages';\n\nexport const App: React.FC = () => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const user = useContext(AuthContext);\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isAdding, setIsAdding] = useState(false);\n  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n  const [title, setTitle] = useState('');\n  const [filterStatus, setFilterStatus] = useState(TodoStatus.All);\n  const [clearCompleted, setClearCompleted] = useState(false);\n  const [processedTodo, setProcessedTodo] = useState<number[]>([0]);\n\n  const activeTodos = useMemo(() => {\n    return todos.filter(todo => !todo.completed).length;\n  }, [todos]);\n\n  const completedTodos = useMemo(() => todos.length - activeTodos,\n    [activeTodos]);\n\n  const todosLength = useMemo(() => todos.length, [todos]);\n\n  useEffect(() => {\n    if (user) {\n      getTodos(user.id)\n        .then(setTodos)\n        .catch(() => setErrorMessage(ErrorMessages.TodosWereNotLoaded));\n    }\n  }, [user]);\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    if (!title.trim()) {\n      setErrorMessage(ErrorMessages.TitleIsEmpty);\n\n      return;\n    }\n\n    if (user) {\n      setIsAdding(true);\n      setTempTodo({\n        id: 0,\n        userId: user.id,\n        title,\n        completed: false,\n      });\n\n      addTodo(title, user?.id)\n        .then((newTodo) => {\n          setTodos((prevTodos) => ([\n            ...prevTodos,\n            newTodo,\n          ]));\n\n          setTitle('');\n        })\n        .catch(() => setErrorMessage(ErrorMessages.TodoIsNotAdded))\n        .finally(() => {\n          setIsAdding(false);\n          setTempTodo(null);\n          setTitle('');\n        });\n    }\n  };\n\n  const handleDeleteTodo = (id: number) => {\n    setProcessedTodo(todosId => [...todosId, id]);\n\n    return deleteTodo(id)\n      .then(() => {\n        setTodos((listOfTodos) => (\n          listOfTodos.filter(todo => todo.id !== id)));\n      })\n      .catch(() => setErrorMessage(ErrorMessages.TodoIsNotDeleted))\n      .finally(() => setProcessedTodo(todosId => (\n        todosId.filter(todoId => todoId !== id))));\n  };\n\n  const handleChangeTodo = (\n    id: number,\n    caption: string,\n    changeCompletedStatus = true,\n  ) => {\n    setProcessedTodo(todosId => [...todosId, id]);\n\n    changeTodo(id, caption).then(() => {\n      setTodos((listOfTodos) => (\n        listOfTodos.map(todo => {\n          return todo.id === id\n            ? {\n              ...todo,\n              title: caption,\n              completed: changeCompletedStatus\n                ? !todo.completed\n                : todo.completed,\n            }\n            : todo;\n        })));\n    })\n      .catch(() => setErrorMessage(ErrorMessages.TodoIsNotUpdates))\n      .finally(() => setProcessedTodo(todosId => (\n        todosId.filter(todoId => todoId !== id))));\n  };\n\n  const toggleAll = () => {\n    const toggleStatus = todosLength === completedTodos;\n\n    todos.forEach(todo => {\n      const { id, title: caption, completed } = todo;\n\n      if (completed === toggleStatus) {\n        handleChangeTodo(id, caption);\n      }\n    });\n  };\n\n  return (\n    <div className=\"todoapp\">\n      <h1 className=\"todoapp__title\">todos</h1>\n\n      <div className=\"todoapp__content\">\n        <Header\n          isAdding={isAdding}\n          todosLength={todosLength}\n          onSubmit={handleSubmit}\n          title={title}\n          setTitle={setTitle}\n          onToggle={toggleAll}\n          completedTodos={completedTodos}\n        />\n\n        <TodoList\n          todos={todos}\n          onDelete={handleDeleteTodo}\n          filterStatus={filterStatus}\n          clearCompleted={clearCompleted}\n          changeTodo={handleChangeTodo}\n          processedTodo={processedTodo}\n        />\n\n        {tempTodo && (\n          <TodoItem\n            todo={tempTodo}\n            onDelete={handleDeleteTodo}\n            isAdding={isAdding}\n            clearCompleted={clearCompleted}\n            changeTodo={handleChangeTodo}\n            processedTodo={processedTodo}\n          />\n        )}\n\n        {!!todosLength && (\n          <Footer\n            onStatusChange={setFilterStatus}\n            status={filterStatus}\n            activeTodos={activeTodos}\n            completedTodos={completedTodos}\n            onClear={setClearCompleted}\n          />\n        )}\n      </div>\n\n      <Error errorMessage={errorMessage} onClose={setErrorMessage} />\n    </div>\n  );\n};\n","import { createRoot } from 'react-dom/client';\nimport React from 'react';\n\nimport 'bulma/css/bulma.css';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport './styles/index.scss';\n\nimport { App } from './App';\nimport { AuthProvider } from './components/Auth/AuthContext';\n\nconst Root = () => (\n  <AuthProvider>\n    <App />\n  </AuthProvider>\n);\n\ncreateRoot(document.getElementById('root') as HTMLDivElement)\n  .render(<Root />);\n"],"sourceRoot":""}